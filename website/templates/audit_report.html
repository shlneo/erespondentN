{% extends "base.html" %}
{% block title %}–ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç—á–µ—Ç–∞ - ErespondentN{% endblock %}
{% block content %}
<div class = "report-area_page">
    <div class = "report-area-menu">
        <div class="report-area_podmenu">
            <div class="content-podmenu">
                <nav>
                    <ul>          
                        <section>
                            <div class="functions_menu" >               
                                <li onclick="scrollToTickets()">
                                    <img src="{{ url_for('static', filename='img/icon_send.png')}}" alt="">
                                    <a class = "li-title">
                                        <span>–û—Ç–ø—Ä–∞–≤–∏—Ç—å</span>
                                    </a>  
                                </li>                                  
                            </div>
                            <a class="functions_menu_name">
                                –°–æ–æ–±—â–µ–Ω–∏–µ
                            </a>
                        </section>
                        <section>
                            <div class = "functions_menu">
                                <li data-section="fuel_section_link" class = "activefunctions_menu">         
                                    <img src="{{ url_for('static', filename='img/Toplivo.png')}}" alt="">
                                    <a class = "li-title">
                                        <span>–¢–æ–ø–ª–∏–≤–æ</span>
                                    </a>  
                                </li>
                                <li data-section="heat_section_link" >                      
                                    <img src="{{ url_for('static', filename='img/Teplo.png')}}" alt="">
                                    <a class = "li-title">
                                        <span>–¢–µ–ø–ª–æ</span>
                                    </a>  
                                </li>
                                <li data-section="electro_section_link">           
                                    <img src="{{ url_for('static', filename='img/Electro.png')}}" alt="">
                                    <a class = "li-title">
                                        <span>–≠–ª–µ–∫—Ç—Ä–æ</span>
                                    </a>  
                                </li>  
                            </div>
                            <a class="functions_menu_name">
                                –†–∞–∑–¥–µ–ª
                            </a>
                        </section>
                        <section>
                            <div class = "functions_menu">  
                                <form style = "display: none;" id = "export-table-form" action="/export-table" method="post">
                                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                                    <input type = "hidden" name = "version_id" value = "{{current_version.id}}" readonly>
                                    <input type = "hidden" name = "numb_section" value = "1" readonly>
                                </form>
                                <li id = "export-table-btn">           
                                    <img src="{{ url_for('static', filename='img/icon_excel.png')}}" alt="">
                                    <a class = "li-title">
                                        <span>–≠–∫—Å–ø–æ—Ä—Ç</span>
                                    </a>     
                                </li>                         
                                <li onclick="sortTable()"  title = '–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ [–ë]'>            
                                    <img src="{{ url_for('static', filename='img/icon_sort.png')}}" alt="">
                                    <a class = "li-title">
                                        <span>–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞</span>
                                    </a>    
                                </li>  
                            </div>  
                            <a class="functions_menu_name">
                                –¢–∞–±–ª–∏—Ü–∞
                            </a>
                        </section>
                    </ul>
                </nav>
            </div>
        </div> 
    </div>
    <div class = "rotation-fromareas">
        <div class = "rotation-fromareas_info"  style = "margin: 20px 30px;"> 
            <span>
                <a class = "back_orbital" href="javascript:void(0)" onclick="smartBack()">
                    –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –æ—Ç—á–µ—Ç–∞–º</a>
            </span>
            <span> 
                <img src="{{ url_for('static', filename='img/icon_arroy.png')}}" alt="">
            </span>
            <span>
                <a>–°—Ç–∞—Ç—É—Å</a>
                {% set version = current_version %}       
                {% if version %}  
                        {% if version.status == '–û–¥–æ–±—Ä–µ–Ω' %}
                            <span class="status-badge status-approved">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                                </svg>
                                <span>–û–¥–æ–±—Ä–µ–Ω</span>
                            </span>      
                        {% elif version.status == '–û—Ç–ø—Ä–∞–≤–ª–µ–Ω' %}
                            <span class="status-badge status-pending">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z" />
                                </svg>
                                <span>–ù–µ–ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã–π</span>
                            </span>
                            
                        {% elif version.status == '–ï—Å—Ç—å –∑–∞–º–µ—á–∞–Ω–∏—è' %}
                            <span class="status-badge status-warning">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z" />
                                </svg>
                                <span>–ï—Å—Ç—å –∑–∞–º–µ—á–∞–Ω–∏—è</span>
                            </span>
                            
                        {% elif version.status == '–ì–æ—Ç–æ–≤ –∫ —É–¥–∞–ª–µ–Ω–∏—é' %}
                            <span class="status-badge status-delete">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0" />
                                </svg>
                                <span>–ì–æ—Ç–æ–≤ –∫ —É–¥–∞–ª–µ–Ω–∏—é</span>
                            </span>
                        {% else %}
                            <span class="status-badge status-default">
                                <span>{{ version.status }}</span>
                            </span>
                        {% endif %}
                {% else %}
                {% endif %}
            </span>
        </div>
    </div>

    <div class="report-area">
        <div id="fuel_section_table"> 
            <table class = "table-report-area">
                <thead class="table-title">
                    <tr>
                        <th class="resizable" rowspan="2"></th>
                        <th class="resizable" style = "white-space: nowrap;" rowspan="2">–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –≤–∏–¥–∞ –ø—Ä–æ–¥—É–∫—Ü–∏–∏ (—Ä–∞–±–æ—Ç —É—Å–ª—É–≥)<div class="resizer"></div></th>
                        <th class="resizable" rowspan="2" style = "white-space: nowrap;">–ö–æ–¥ —Å—Ç—Ä–æ–∫–∏<div class="resizer"></div></th>
                        <th class="resizable" rowspan="2" style = "white-space: nowrap;">–ö–æ–¥ –ø–æ –û–ö–≠–î<div class="resizer"></div></th>
                        <th class="resizable" rowspan="2">–ï–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è<div class="resizer"></div></th>
                        <th class="resizable" rowspan="2">–ü—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–æ –ø—Ä–æ–¥—É–∫—Ü–∏–∏ (—Ä–∞–±–æ—Ç, —É—Å–ª—É–≥) –∑–∞ –æ—Ç—á–µ—Ç–Ω—ã–π –ø–µ—Ä–∏–æ–¥<div class="resizer"></div></th>
                        <th class="resizable" colspan="2">–ò–∑—Ä–∞—Å—Ö–æ–¥–æ–≤–∞–Ω–æ –Ω–∞ –µ–¥–∏–Ω–∏—Ü—É –ø—Ä–æ–¥—É–∫—Ü–∏–∏ (—Ä–∞–±–æ—Ç—ã, —É—Å–ª—É–≥–∏) –∑–∞ –æ—Ç—á–µ—Ç–Ω—ã–π –ø–µ—Ä–∏–æ–¥, –∫–≥ —É.—Ç.<div class="resizer"></div></th>
                        <th class="resizable" colspan="3">–ò–∑—Ä–∞—Å—Ö–æ–¥–æ–≤–∞–Ω–æ –Ω–∞ –≤—Å—é –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–Ω—É—é –ø—Ä–æ–¥—É–∫—Ü–∏—é (—Ä–∞–±–æ—Ç—É, —É—Å–ª—É–≥—É) –∑–∞ –æ—Ç—á–µ—Ç–Ω—ã–π –ø–µ—Ä–∏–æ–¥, —Ç —É.—Ç.<div class="resizer"></div></th>
                        <th class="resizable" rowspan="2">–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ<div class="resizer"></div></th>
                        <th rowspan="2"></th>
                    </tr>
                    <tr>
                        <th class="resizable">–ø–æ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω–æ–π –Ω–æ—Ä–º–µ (–ø—Ä–µ–¥–µ–ª—å–Ω–æ–º—É —É—Ä–æ–≤–Ω—é)<div class="resizer"></div></th>
                        <th class="resizable">—Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏<div class="resizer"></div></th>
                        <th class="resizable">–ø–æ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω–æ–π –Ω–æ—Ä–º–µ (–ø—Ä–µ–¥–µ–ª—å–Ω–æ–º—É —É—Ä–æ–≤–Ω—é)<div class="resizer"></div></th>
                        <th class="resizable">—Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏<div class="resizer"></div></th>
                        <th class="resizable" style = "width: 80px;">–≠–∫–æ–Ω–æ–º–∏—è(-), –ø–µ—Ä–µ—Ä–∞—Å—Ö–æ–¥(+)<div class="resizer"></div></th> 
                    </tr>
                    <tr>
                        <th></th>
                        <th class="resizable">A<div class="resizer"></div></th>
                        <th class="resizable">–ë<div class="resizer"></div></th>
                        <th class="resizable">–í<div class="resizer"></div></th>
                        <th class="resizable">–ì<div class="resizer"></div></th>
                        <th class="resizable">1<div class="resizer"></div></th>
                        <th class="resizable">2<div class="resizer"></div></th>
                        <th class="resizable">3<div class="resizer"></div></th>
                        <th class="resizable">4<div class="resizer"></div></th>
                        <th class="resizable">5<div class="resizer"></div></th>
                        <th class="resizable">6<div class="resizer"></div></th>
                        <th class="resizable">7<div class="resizer"></div></th>
                        <th rowspan="2"></th>
                    </tr>
                </thead>
                <tbody>
                    {%if sections_fuel %}
                        {% for row in sections_fuel %}
                        <tr class = "section_row" data-id="{{ row.id }}" >
                            <td>
                                <input 
                                    type = "hidden" 
                                    name = "id_section" 
                                    value = "{{ row.id }}" 
                                    readonly
                                >
                            </td>
                            <td>
                                <input 
                                    class = "product-name_fuel" 
                                    type = "text" 
                                    value = "{{ row.product.NameProduct }}" 
                                    readonly
                                >
                            </td>
                            <td>
                                <input 
                                    type = "text"
                                    name = "product-cod_fuel"
                                    value = "{{ row.code_product }}" 
                                    readonly
                                >
                            </td>
                            <td>
                                <input 
                                    name = "Oked_fuel" 
                                    type = "text"
                                    value = "{{ row.Oked }}" 
                                    readonly
                                >
                            </td>
                            <td> 
                                <input 
                                    style = "white-space: nowrap; text-align: left;"
                                    type = "text" 
                                    name = "" 
                                    value = "{{ row.product.unit.NameUnit }}" 
                                    readonly
                                >
                            </td> 
                            <td>
                                <input 
                                    name = "produced_fuel" 
                                    type = "text"
                                    value = "{{ row.produced }}" 
                                    readonly
                                >
                            </td>
                            <td>
                                <input 
                                    name = "Consumed_Quota_fuel" 
                                    type = "text"
                                    value = "{{ row.Consumed_Quota }}" 
                                    readonly
                                >
                            </td>
                            <td>
                                <input 
                                    name = "Consumed_Fact_fuel" 
                                    type = "text"
                                    value = "{{ row.Consumed_Fact }}" 
                                    readonly
                                >
                            </td>
                            <td>
                                <input 
                                    name = "Consumed_Total_Quota_fuel" 
                                    type = "text"
                                    value = "{{ row.Consumed_Total_Quota }}" 
                                    readonly
                                >
                            </td>
                            <td>     
                                <input 
                                    name = "Consumed_Total_Fact_fuel" 
                                    type = "text"
                                    value = "{{ row.Consumed_Total_Fact }}" 
                                    readonly
                                >
                            </td>
                            {% if row.total_differents is not none and (row.total_differents < 0.0 or row.total_differents == 0.00) %}
                                <td style="background-color: #a2ff77;">
                                    <input 
                                        style="background-color: #a2ff77; color: black;" 
                                        name="row_total_differents" 
                                        type = "text"
                                        value="{{ row.total_differents }}" 
                                        readonly
                                    >
                                </td>
                            {%else%}
                                <td style="background-color: #ff7676;">
                                    <input 
                                        style="background-color: #ff7676; 
                                        color: black;" 
                                        type = "text"
                                        name="row_total_differents" 
                                        value="{{ row.total_differents }}" 
                                        readonly
                                    >
                                </td>
                            {%endif%}
                            <td> 
                                <input 
                                    name = "note_fuel" 
                                    type = "text"
                                    value = "{{ row.note }}" 
                                    readonly
                                >
                            </td>     
                            <td colspan="2"></td>      
                        </tr>   
                        {%endfor%}
                    {%else%}
                        <tr>
                            <td></td>
                            <td style = "height: 24px;" colspan="12">
                                <input type = "text"  value = "–ü—É—Å—Ç–æ" readonly>
                            </td>
                        </tr>
                    {%endif%}
                </tbody>
            </table>        
        </div>
        <div id="heat_section_table" style="display: none;">
            <table class = "table-report-area">
                <thead class="table-title">
                    <tr>
                        <th class="resizable" rowspan="2"></th>
                        <th class="resizable" style = "white-space: nowrap;" rowspan="2">–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –≤–∏–¥–∞ –ø—Ä–æ–¥—É–∫—Ü–∏–∏ (—Ä–∞–±–æ—Ç —É—Å–ª—É–≥)<div class="resizer"></div></th>
                        <th class="resizable" rowspan="2" style = "white-space: nowrap;">–ö–æ–¥ —Å—Ç—Ä–æ–∫–∏<div class="resizer"></div></th>
                        <th class="resizable" rowspan="2" style = "white-space: nowrap;">–ö–æ–¥ –ø–æ –û–ö–≠–î<div class="resizer"></div></th>
                        <th class="resizable" rowspan="2">–ï–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è<div class="resizer"></div></th>
                        <th class="resizable" rowspan="2">–ü—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–æ –ø—Ä–æ–¥—É–∫—Ü–∏–∏ (—Ä–∞–±–æ—Ç, —É—Å–ª—É–≥) –∑–∞ –æ—Ç—á–µ—Ç–Ω—ã–π –ø–µ—Ä–∏–æ–¥<div class="resizer"></div></th>
                        <th class="resizable" colspan="2">–ò–∑—Ä–∞—Å—Ö–æ–¥–æ–≤–∞–Ω–æ –Ω–∞ –µ–¥–∏–Ω–∏—Ü—É –ø—Ä–æ–¥—É–∫—Ü–∏–∏ (—Ä–∞–±–æ—Ç—ã, —É—Å–ª—É–≥–∏) –∑–∞ –æ—Ç—á–µ—Ç–Ω—ã–π –ø–µ—Ä–∏–æ–¥, –ú–∫–∞–ª<div class="resizer"></div></th>
                        <th class="resizable" colspan="3">–ò–∑—Ä–∞—Å—Ö–æ–¥–æ–≤–∞–Ω–æ –Ω–∞ –≤—Å—é –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–Ω—É—é –ø—Ä–æ–¥—É–∫—Ü–∏—é (—Ä–∞–±–æ—Ç—É, —É—Å–ª—É–≥—É) –∑–∞ –æ—Ç—á–µ—Ç–Ω—ã–π –ø–µ—Ä–∏–æ–¥, –ì–∫–∞–ª<div class="resizer"></div></th>
                        <th class="resizable" rowspan="2">–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ<div class="resizer"></div></th>
                        <th rowspan="2"></th>
                    </tr>
                    <tr>
                        <th class="resizable">–ø–æ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω–æ–π –Ω–æ—Ä–º–µ (–ø—Ä–µ–¥–µ–ª—å–Ω–æ–º—É —É—Ä–æ–≤–Ω—é)<div class="resizer"></div></th>
                        <th class="resizable">—Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏<div class="resizer"></div></th>
                        <th class="resizable">–ø–æ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω–æ–π –Ω–æ—Ä–º–µ (–ø—Ä–µ–¥–µ–ª—å–Ω–æ–º—É —É—Ä–æ–≤–Ω—é)<div class="resizer"></div></th>
                        <th class="resizable">—Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏<div class="resizer"></div></th>
                        <th class="resizable" style = "width: 80px;">–≠–∫–æ–Ω–æ–º–∏—è(-), –ø–µ—Ä–µ—Ä–∞—Å—Ö–æ–¥(+)<div class="resizer"></div></th> 
                    </tr>
                    <tr>
                        <th></th>
                        <th class="resizable">A<div class="resizer"></div></th>
                        <th class="resizable">–ë<div class="resizer"></div></th>
                        <th class="resizable">–í<div class="resizer"></div></th>
                        <th class="resizable">–ì<div class="resizer"></div></th>
                        <th class="resizable">1<div class="resizer"></div></th>
                        <th class="resizable">2<div class="resizer"></div></th>
                        <th class="resizable">3<div class="resizer"></div></th>
                        <th class="resizable">4<div class="resizer"></div></th>
                        <th class="resizable">5<div class="resizer"></div></th>
                        <th class="resizable">6<div class="resizer"></div></th>
                        <th class="resizable">7<div class="resizer"></div></th>
                        <th rowspan="2"></th>
                    </tr>
                </thead>
                <tbody>
                    {%if sections_heat%}
                        {% for row in sections_heat %}
                        <tr class = "section_row" data-id="{{ row.id }}" >
                            <td>
                                <input 
                                    type = "hidden" 
                                    name = "id_section" 
                                    value = "{{ row.id }}" 
                                    readonly
                                >
                            </td>
                            <td>
                                <input type = "text"
                                    class = "product-name_fuel" 
                                    type = "text" 
                                    value = "{{ row.product.NameProduct }}" 
                                    readonly
                                >
                            </td>
                            <td>
                                <input type = "text"
                                    name = "code_product" 
                                    value = "{{ row.code_product }}" 
                                    readonly
                                >
                            </td>
                            <td>
                                <input type = "text"
                                    name = "Oked_fuel" 
                                    value = "{{ row.Oked }}" 
                                    readonly
                                >
                            </td>
                            <td> 
                                <input type = "text"
                                    style = "white-space: nowrap; text-align: left;" 
                                    name = "" 
                                    value = "{{ row.product.unit.NameUnit }}" 
                                    readonly
                                >
                            </td>
                            <td>
                                <input type = "text"
                                    name = "produced_fuel" 
                                    value = "{{ row.produced }}" 
                                    readonly
                                >
                            </td>
                            <td>
                                <input type = "text"
                                    name = "Consumed_Quota_fuel" 
                                    value = "{{ row.Consumed_Quota }}" 
                                    readonly
                                >
                            </td>
                            <td>
                                <input type = "text"
                                    name = "Consumed_Fact_fuel" 
                                    value = "{{ row.Consumed_Fact }}" 
                                    readonly
                                >
                            </td>
                            <td>
                                <input type = "text"
                                    name = "Consumed_Total_Quota_fuel" 
                                    value = "{{ row.Consumed_Total_Quota }}" 
                                    readonly
                                >
                            </td>
                            <td>     
                                <input type = "text"
                                    name = "Consumed_Total_Fact_fuel" 
                                    value = "{{ row.Consumed_Total_Fact }}" 
                                    readonly
                                >
                            </td>
                            {% if row.total_differents is not none and (row.total_differents < 0.0 or row.total_differents == 0.00) %}
                                <td style="background-color: #a2ff77;">
                                    <input type = "text"
                                        style="background-color: #a2ff77; color: black;" 
                                        name="row_total_differents" 
                                        value="{{ row.total_differents }}" 
                                        readonly
                                    >
                                </td>
                            {%else%}
                                <td style="background-color: #ff7676;">
                                    <input type = "text"
                                        style="background-color: #ff7676; 
                                        color: black;" 
                                        name="row_total_differents" 
                                        value="{{ row.total_differents }}" 
                                        readonly
                                    >
                                </td>
                            {%endif%}
                            <td> 
                                <input type = "text"
                                    name = "note_fuel" 
                                    value = "{{ row.note }}" 
                                    readonly
                                >
                            </td>  
                            <td colspan="2"></td>          
                        </tr>   
                        {%endfor%}
                    {%else%}
                        <tr>
                            <td></td>
                            <td style = "height: 24px;" colspan="12">
                                <input type = "text"  value = "–ü—É—Å—Ç–æ" readonly>
                            </td>
                        </tr>
                    {%endif%}
                </tbody>
            </table>        
        </div>
        <div id="electro_section_table" style="display: none;">
            <table class = "table-report-area">
                <thead class="table-title">
                    <tr>
                        <th class="resizable" rowspan="2"></th>
                        <th class="resizable" style="white-space: nowrap;" rowspan="2">–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –≤–∏–¥–∞ –ø—Ä–æ–¥—É–∫—Ü–∏–∏ (—Ä–∞–±–æ—Ç —É—Å–ª—É–≥)<div class="resizer"></div></th>
                        <th class="resizable" rowspan="2" style = "white-space: nowrap;">–ö–æ–¥ —Å—Ç—Ä–æ–∫–∏<div class="resizer"></div></th>
                        <th class="resizable" rowspan="2" style = "white-space: nowrap;">–ö–æ–¥ –ø–æ –û–ö–≠–î<div class="resizer"></div></th>
                        <th class="resizable" rowspan="2">–ï–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è<div class="resizer"></div></th>
                        <th class="resizable" rowspan="2">–ü—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–æ –ø—Ä–æ–¥—É–∫—Ü–∏–∏ (—Ä–∞–±–æ—Ç, —É—Å–ª—É–≥) –∑–∞ –æ—Ç—á–µ—Ç–Ω—ã–π –ø–µ—Ä–∏–æ–¥<div class="resizer"></div></th>
                        <th class="resizable" colspan="2">–ò–∑—Ä–∞—Å—Ö–æ–¥–æ–≤–∞–Ω–æ –Ω–∞ –µ–¥–∏–Ω–∏—Ü—É –ø—Ä–æ–¥—É–∫—Ü–∏–∏ (—Ä–∞–±–æ—Ç—ã, —É—Å–ª—É–≥–∏) –∑–∞ –æ—Ç—á–µ—Ç–Ω—ã–π –ø–µ—Ä–∏–æ–¥, –∫–í—Ç—á<div class="resizer"></div></th>
                        <th class="resizable" colspan="3">–ò–∑—Ä–∞—Å—Ö–æ–¥–æ–≤–∞–Ω–æ –Ω–∞ –≤—Å—é –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–Ω—É—é –ø—Ä–æ–¥—É–∫—Ü–∏—é (—Ä–∞–±–æ—Ç—É, —É—Å–ª—É–≥—É) –∑–∞ –æ—Ç—á–µ—Ç–Ω—ã–π –ø–µ—Ä–∏–æ–¥, —Ç—ã—Å.–∫–í—Ç—á<div class="resizer"></div></th>
                        <th class="resizable" rowspan="2">–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ<div class="resizer"></div></th>
                        <th rowspan="2"></th>
                    </tr>
                    <tr>
                        <th class="resizable">–ø–æ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω–æ–π –Ω–æ—Ä–º–µ (–ø—Ä–µ–¥–µ–ª—å–Ω–æ–º—É —É—Ä–æ–≤–Ω—é)<div class="resizer"></div></th>
                        <th class="resizable">—Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏<div class="resizer"></div></th>
                        <th class="resizable">–ø–æ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω–æ–π –Ω–æ—Ä–º–µ (–ø—Ä–µ–¥–µ–ª—å–Ω–æ–º—É —É—Ä–æ–≤–Ω—é)<div class="resizer"></div></th>
                        <th class="resizable">—Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏<div class="resizer"></div></th>
                        <th class="resizable" style = "width: 80px;">–≠–∫–æ–Ω–æ–º–∏—è(-), –ø–µ—Ä–µ—Ä–∞—Å—Ö–æ–¥(+)<div class="resizer"></div></th> 
                    </tr>
                    <tr>
                        <th></th>
                        <th class="resizable">A<div class="resizer"></div></th>
                        <th class="resizable">–ë<div class="resizer"></div></th>
                        <th class="resizable">–í<div class="resizer"></div></th>
                        <th class="resizable">–ì<div class="resizer"></div></th>
                        <th class="resizable">1<div class="resizer"></div></th>
                        <th class="resizable">2<div class="resizer"></div></th>
                        <th class="resizable">3<div class="resizer"></div></th>
                        <th class="resizable">4<div class="resizer"></div></th>
                        <th class="resizable">5<div class="resizer"></div></th>
                        <th class="resizable">6<div class="resizer"></div></th>
                        <th class="resizable">7<div class="resizer"></div></th>
                        <th rowspan="2"></th>
                    </tr>
                </thead>
                <tbody>
                    {%if sections_electro%}
                        {% for row in sections_electro %}
                        <tr class = "section_row" data-id="{{ row.id }}" >
                            <td>
                                <input type = "hidden" name = "id_section" value = "{{ row.id }}" readonly></td>
                            <td>
                                <input type = "text" class = "product-name_fuel" type = "text" value = "{{ row.product.NameProduct }}" readonly>
                            </td>
                            <td>
                                <input type = "text"name = "code_product" value = "{{ row.code_product }}" readonly>
                            </td>
                            <td>
                                <input type = "text" name = "Oked_fuel" value = "{{ row.Oked }}" readonly>
                            </td>
                            <td> 
                                <input type = "text" style = "white-space: nowrap; text-align: left;" name = "" value = "{{ row.product.unit.NameUnit }}" readonly>
                            </td> 
                            <td>
                                <input type = "text" name = "produced_fuel" value = "{{ row.produced }}" readonly>
                            </td>
                            <td>
                                <input type = "text" name = "Consumed_Quota_fuel" value = "{{ row.Consumed_Quota }}" readonly>
                            </td>
                            <td>
                                <input type = "text" name = "Consumed_Fact_fuel" value = "{{ row.Consumed_Fact }}" readonly>
                            </td>
                            <td>
                                <input type = "text" name = "Consumed_Total_Quota_fuel" value = "{{ row.Consumed_Total_Quota }}" readonly>
                            </td>
                            <td>     
                                <input type = "text" name = "Consumed_Total_Fact_fuel" value = "{{ row.Consumed_Total_Fact }}" readonly>
                            </td>
                            {% if row.total_differents is not none and (row.total_differents < 0.0 or row.total_differents == 0.00) %}
                                <td style="background-color: #a2ff77;">
                                    <input type = "text" style="background-color: #a2ff77; color: black;" name="row_total_differents"  value="{{ row.total_differents }}" readonly>
                                </td>
                            {%else%}
                                <td style="background-color: #ff7676;">
                                    <input type = "text" style="background-color: #ff7676; color: black;" name="row_total_differents"  value="{{ row.total_differents }}" readonly>
                                </td>
                            {%endif%}
                            <td> 
                                <input type = "text" name = "note_fuel" value = "{{ row.note }}" readonly>
                            </td>     
                            <td colspan="2"></td>       
                        </tr>   
                        {%endfor%}
                    {%else%}
                        <tr>
                            <td></td>
                            <td style = "height: 24px;" colspan="12">
                                <input type = "text"  value = "–ü—É—Å—Ç–æ" readonly>
                            </td>
                        </tr>
                    {%endif%}
                </tbody>
            </table>        
        </div>
    </div>
    <section class="report-dop-info">
        <div class="report-details">
            <div class="detail-item">
                <svg class="detail-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"/>
                </svg>
                <div class="detail-content">
                    <div class="detail-label">–ü—Ä–µ–¥–ø—Ä–∏—è—Ç–∏–µ</div>
                    <div class="detail-value">{{current_report.organization.full_name}}</div>
                </div>
            </div>
            
            <div class="detail-item">
                <svg class="detail-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 114 0v1m-4 0a2 2 0 104 0m-5 8a2 2 0 100-4 2 2 0 000 4zm0 0c1.306 0 2.417.835 2.83 2M9 14a3.001 3.001 0 00-2.83 2M15 11h3m-3 4h2"/>
                </svg>
                <div class="detail-content">
                    <div class="detail-label">–û–ö–ü–û</div>
                    <div class="detail-value">{{current_report.okpo}}</div>
                </div>
            </div>
            
            <div class="detail-item">
                <svg class="detail-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                </svg>
                <div class="detail-content">
                    <div class="detail-label">–ì–æ–¥</div>
                    <div class="detail-value">{{current_report.year}}</div>
                </div>
            </div>
            
            <div class="detail-item">
                <svg class="detail-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
                </svg>
                <div class="detail-content">
                    <div class="detail-label">–ö–≤–∞—Ä—Ç–∞–ª</div>
                    <div class="detail-value">{{current_report.quarter}}</div>
                </div>
            </div>
        </div>
        <div class="report-details">
            <div class="detail-item">
                <svg class="detail-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
                <div class="detail-content">
                    <div class="detail-label">–ù–∞—á–∞–ª–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è</div>
                    <div class="detail-value">
                        {% if current_version.begin_time %}
                            {{ current_version.begin_time.strftime('%d.%m.%Y') }}
                        {% else %}
                            –ù–µ —É–∫–∞–∑–∞–Ω–æ
                        {% endif %}</div>
                </div>
            </div>
            <div class="detail-item">
                <svg class="detail-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z" />
                </svg>
                <div class="detail-content">
                    <div class="detail-label">–ü–æ—Å–ª–µ–¥–Ω–µ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ</div>
                    <div class="detail-value">
                        {% if current_version.change_time %}
                            {{ current_version.change_time.strftime('%d.%m.%Y') }}
                        {% else %}
                            {{ current_version.begin_time.strftime('%d.%m.%Y') if current_version.begin_time else '–ù–µ –∏–∑–º–µ–Ω—è–ª—Å—è' }}
                        {% endif %}</div>
                </div>
            </div>
            <div class="detail-item">
                <svg class="detail-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" />
                </svg>
                <div class="detail-content">
                    <div class="detail-label">–í—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–∫–∏</div>
                    <div class="detail-value">
                        {% if current_version.sent_time %}
                            {{ current_version.sent_time.strftime('%d.%m.%Y') }}
                        {% else %}
                            -
                        {% endif %}</div>
                </div>
            </div>
            <div class="detail-item">
                <svg class="detail-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
                <div class="detail-content">
                    <div class="detail-label">–í—Ä–µ–º—è –ø—Ä–æ–≤–µ—Ä–∫–∏</div>
                    <div class="detail-value">
                        {% if current_version.audit_time %}
                            {{ current_version.audit_time.strftime('%d.%m.%Y') }}
                        {% else %}
                            -
                        {% endif %}</div>
                </div>
            </div>
        </div>
    </section>
    <div class="ticket-area" id = "ticket-area">
        <div class="ticket-header">
            <div class="messages-container">
                <div class="messages-header">
                    <div class="messages-header__left">
                        <h2 class="messages-header__title">
                            <svg class="messages-header__icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" width="20" height="20">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"/>
                            </svg>
                            <span>–ö–≤–∏—Ç–∞–Ω—Ü–∏–∏ –æ—Ç—á–µ—Ç–∞</span>
                        </h2>
                        <div class="messages-header__info">
                            <span class="messages-header__badge">{{ tickets|length }} –∫–≤–∏—Ç–∞–Ω—Ü–∏–π</span>
                        </div>
                    </div>
                    <form method="POST" action="/print-version-tickets" class="print-form">
                        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">  
                        <input type="hidden" name="version_id" value="{{current_version.id}}">
                        <button type="submit" class="print-btn">
                            <svg class="print-btn__icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" width="18" height="18">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"/>
                            </svg>
                            <span>–ü–µ—á–∞—Ç—å –≤—Å–µ—Ö –∫–≤–∏—Ç–∞–Ω—Ü–∏–π</span>
                        </button>
                    </form>
                </div>
                <div class="messages-timeline">
                    {% if tickets %}
                        {% for row in tickets %}
                            <div class="message-item message-item--system">
                                <div class="message-bubble">
                                    <div class="message-bubble__content">
                                        {{ row.note }}
                                    </div>
                                    <div class="message-bubble__footer">
                                        <span class="message-bubble__time">{{ row.begin_time }}</span>
                                {% if row.luck == True %}
                                    <span class="message-bubble__status message-bubble__status--success">
                                        <svg class="message-bubble__status-icon message-bubble__status-icon--success" width="16" height="16" viewBox="0 0 16 16">
                                            <circle cx="8" cy="8" r="7" fill="#10b981"/>
                                            <path d="M5 8L7 10L11 6" stroke="white" stroke-width="2" fill="none"/>
                                        </svg>
                                    </span>
                                {% else %}
                                    <span class="message-bubble__status message-bubble__status--error">
                                        <svg class="message-bubble__status-icon message-bubble__status-icon--error" width="16" height="16" viewBox="0 0 16 16">
                                            <circle cx="8" cy="8" r="7" fill="#ef4444"/>
                                            <path d="M5 5L11 11M11 5L5 11" stroke="white" stroke-width="2" fill="none"/>
                                        </svg>
                                    </span>
                                {% endif %}
                                    </div>
                                </div>
                            </div>
                        {% endfor %}
                    {% else %}
                        <div class="message-item message-item--system">
                            <div class="message-bubble message-bubble--system">
                                <div class="message-bubble__content">
                                    –ö–≤–∏—Ç–∞–Ω—Ü–∏–π –ø–æ–∫–∞ —á—Ç–æ –Ω–µ—Ç
                                </div>
                            </div>
                        </div>
                    {% endif %}
                </div>
            </div>
        
            <div class="form-container">
                <form method="POST" action="/send-comment" class="comment-form">
                    <div class="comment-form__grid">
                        <div class="comment-form__section comment-form__section--info">
                            <div class="section-header">
                                <h3 class="section-title">–ö–æ–º—É</h3>
                            </div>
                            <div class="recipient-info">
                                <div class="detail-item">   
                                    <svg class="detail-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" width="24" height="24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                                    </svg>
                                    <div class="detail-content">
                                        <div class="detail-label">Email</div>
                                        <div class="detail-value">{{current_version.email}}</div>
                                    </div>
                                </div>
                                <div class="detail-item">    
                                    <svg class="detail-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" width="24" height="24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                                    </svg>
                                    <div class="detail-content">
                                        <div class="detail-label">–§–ò–û</div>
                                        <div class="detail-value">{{current_version.fio}}</div>
                                    </div>
                                </div>
                                <div class="detail-item">
                                    <svg class="detail-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" width="24" height="24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
                                    </svg>
                                    <div class="detail-content">
                                        <div class="detail-label">–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞</div>
                                        <div class="detail-value">{{current_version.telephone}}</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="comment-form__section comment-form__section--message">
                            <div class="message-field">
                                <div class="section-header">
                                    <h3 class="section-title">–¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è</h3>
                                </div>
                                <div class="answer-highlight-second">
                                    <div class="highlight-icon">üí°</div>
                                    <p><strong>–ï—Å–ª–∏</strong> –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç <strong>–æ—à–∏–±–∫–∞</strong> –≤ –æ—Ç—á–µ—Ç–µ, <strong>—É–∫–∞–∂–∏—Ç–µ</strong> –µ—ë, –≤ –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ –ø—Ä–æ—Å—Ç–æ —Å–º–µ–Ω–∏—Ç–µ —Å—Ç–∞—Ç—É—Å –Ω–∞ <strong>–û–¥–æ–±—Ä–µ–Ω–Ω—ã–π</strong>.</p>
                                </div>
                                <textarea name="text" maxlength="399" required class="message-field__textarea" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..." oninput="updateCounter(this)"></textarea>
                                <div class="message-field__counter" id="messageCounter">0/399</div>
                                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                                <input type="hidden" name="version_id" value="{{current_version.id}}">
                                <div class="model_but_area right">
                                    <button type="submit" class="blue_btn {% if current_version.status in ['–û–¥–æ–±—Ä–µ–Ω', '–ì–æ—Ç–æ–≤ –∫ —É–¥–∞–ª–µ–Ω–∏—é', '–ï—Å—Ç—å –∑–∞–º–µ—á–∞–Ω–∏—è'] %}disabled{% endif %}"> 
                                        <img src="/static/img/Send.svg" alt="" class="button-icon">
                                        <span>–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ</span>
                                    </button> 
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
  </div>



<script>
    function smartBack() {
        const ref = document.referrer;
        if (ref.includes('tickets_cont=true') && history.length > 2) {
            history.go(-2);
        } else {
            history.back();
        }
    }
</script>

<script src="{{ url_for('static', filename='js/audit_report.js') }}"></script>
{% endblock %}