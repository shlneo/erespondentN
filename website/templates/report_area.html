{% extends "base.html" %}
{% block title %}–û—Ç—á–µ—Ç—ã - ErespondentN{% endblock %}
{% block content %}

<div class="report-area_page">
    <div class="report-area_menu">
        <div class="report-area_podmenu">
            <div class="content-podmenu">
                <nav>
                    <ul>
                        <section>
                            <div class="functions_menu">
                                <li id = "link_add_report">
                                    <img src="{{ url_for('static', filename='img/icon_new_file.png') }}" alt="–°–æ–∑–¥–∞—Ç—å –æ—Ç—á–µ—Ç">
                                    <a>–ù–æ–≤—ã–π</a>
                                </li>
                            </div>
                            <a class="functions_menu_name">
                                –û—Ç—á–µ—Ç
                            </a>
                        </section>
                        <section>
                            <div class="functions_menu">
                                <li id = "link_edit_sections" data-action="editSectionButtonMenu">
                                    <img src="{{ url_for('static', filename='img/edit.png') }}" alt="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–¥–µ–ª—ã">
                                    <a>–ò–∑–º–µ–Ω–∏—Ç—å</a>
                                </li>
                            </div>
                            <a class="functions_menu_name">
                                –†–∞–∑–¥–µ–ª—ã
                            </a>
                        </section>
                        <section>
                            <div class="functions_menu">
                                <form id="export-version-form" action="/export-version/{{current_version}}" method="POST" style="display: none;">
                                </form>    
                                <li id="export_versionButton">
                                    <img src="{{ url_for('static', filename='img/icon_excel.png') }}" alt="">
                                    <a>–≠–∫—Å–ø–æ—Ä—Ç</a>
                                </li>

                                <li id="control_versionButton">
                                    <img src="{{ url_for('static', filename='img/icon_control.png') }}" alt="">
                                    <a>–ö–æ–Ω—Ç—Ä–æ–ª—å</a>
                                </li>

                                    <form id="control-version-form" action="/control_version" method="POST" style="display: none;">
                                    </form>
                        
                                <li id = "agreedVersionButton">
                                    <img src="{{ url_for('static', filename='img/icon_galochka.png') }}" alt="">
                                    <a>–°–æ–≥–ª–∞—Å–æ–≤–∞—Ç—å</a>
                                </li>
                                    <form id="agreed-version-form" action="/agreed_version" method="POST" style="display: none;">
                                    </form>
                                <li id = "sentVersionButton">
                                    <img src="{{ url_for('static', filename='img/icon_send.png') }}" alt="">
                                    <a>–û—Ç–ø—Ä–∞–≤–∏—Ç—å</a>
                                </li>
                            </div>
                            <a class="functions_menu_name">
                                –í–µ—Ä—Å–∏—è
                            </a>
                        </section>
                        <section>
                            <div class="functions_menu">
                                <li id = "PrintTicketButton">
                                    <img src="{{ url_for('static', filename='img/icon_print_file.png') }}" alt="">
                                    <a>–ü–µ—á–∞—Ç—å</a>
                                </li>
                                <form id="print-ticket-form" action="/print_ticket" method="POST" style="display: none;">
                                </form>
                            </div>
                            <a class="functions_menu_name">
                                –ö–≤–∏—Ç–∞–Ω—Ü–∏—è
                            </a>
                        </section>
                        <section>
                            <div class="functions_menu">
                                <li onclick="window.location.href='/FAQ#faq9'">
                                    <svg viewBox="0 0 800 600" fill="none" >
                                        <rect  fill="#F0F4F8"/>
                                        <!-- –°—Ç–æ–ª -->
                                        <rect x="150" y="400" width="500" height="30" fill="#4A5568"/>
                                        <rect x="100" y="430" width="600" height="20" fill="#2D3748"/>
                                        <rect x="250" y="450" width="300" height="150" fill="#1A202C"/>
                                        <!-- –ú–æ–Ω–∏—Ç–æ—Ä -->
                                        <rect x="200" y="100" width="400" height="250" rx="15" fill="#2D3748"/>
                                        <rect x="220" y="120" width="360" height="210" rx="10" fill="#1A202C"/>
                                        <!-- –≠–∫—Ä–∞–Ω –º–æ–Ω–∏—Ç–æ—Ä–∞ -->
                                        <rect x="230" y="130" width="340" height="190" rx="8" fill="#2D3748"/>
                                        <rect x="240" y="140" width="320" height="170" rx="6" fill="#6db1ff"/>
                                        <!-- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —ç–∫—Ä–∞–Ω–∞ -->
                                        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ -->
                                        <rect x="260" y="160" width="280" height="25" rx="4" fill="#FFFFFF"/>
                                        <rect x="270" y="165" width="160" height="15" rx="2" fill="#4299E1"/>
                                        <!-- –®–∞–≥–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ -->
                                        <circle cx="280" cy="210" r="8" fill="#38B2AC"/>
                                        <rect x="300" y="205" width="200" height="10" rx="2" fill="#FFFFFF"/>   
                                        <circle cx="280" cy="235" r="8" fill="#38B2AC"/>
                                        <rect x="300" y="230" width="180" height="10" rx="2" fill="#FFFFFF"/>
                                        <circle cx="280" cy="260" r="8" fill="#38B2AC"/>
                                        <rect x="300" y="255" width="220" height="10" rx="2" fill="#FFFFFF"/>
                                        <circle cx="280" cy="285" r="8" fill="#38B2AC"/>
                                        <rect x="300" y="280" width="150" height="10" rx="2" fill="#FFFFFF"/>
                                        <!-- –ü–æ–¥—Å—Ç–∞–≤–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∞ -->
                                        <rect x="370" y="350" width="60" height="50" fill="#4A5568"/>
                                        <rect x="350" y="400" width="100" height="30" rx="5" fill="#2D3748"/>
                                        <!-- –ö–Ω–∏–≥–∞ -->
                                        <rect x="50" y="380" width="40" height="60" fill="#C53030"/>
                                        <rect x="50" y="380" width="40" height="10" fill="#E53E3E"/>
                                        <!-- –ß–∞—à–∫–∞ –∫–æ—Ñ–µ -->
                                    </svg>
                                    <a>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è</a>
                                </li>
                            </div>
                            <a class="functions_menu_name">
                                –ü–æ–º–æ—â—å
                            </a>
                        </section>
                    </ul>
                </nav>
            </div>
        </div>
    </div>

    <div id="report_automat_open" data-open-report-id="{{ open_report_id }}"></div> 
    <div class="report-area" >
        <table class="table_report-area">
            <thead class="order-table_titels">
                <tr>
                    <th></th>
                    <th style = "white-space: nowrap;">+/&times;</th>
                    <th class="resizable" style="min-width: 120px;">–û–ö–ü–û<div class="resizer"></div></th>
                    <th class="resizable" style="white-space: nowrap; min-width: 320px;">–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –ø—Ä–µ–¥–ø—Ä–∏—è—Ç–∏—è<div class="resizer"></div></th>
                    <th class="resizable" style="min-width: 80px;">–ì–æ–¥<div class="resizer"></div></th>
                    <th class="resizable" style="min-width: 80px;">–ö–≤–∞—Ä—Ç–∞–ª<div class="resizer"></div></th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                {%if report%}
                    {% for row in report %}
                    <tr class="report_row" data-id="{{ row.id }}">
                        <td></td>
                        <td style = "padding: 4px;">
                            <button class="show-versions_button">  
                                <img src="{{ url_for('static', filename='img/Plus.svg')}}" class = "close_black" alt="–ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤–µ—Ä—Å–∏–∏">
                                <span>–†–∞—Å–∫—Ä—ã—Ç—å</span>
                            </button>
                        </td>
                        <td style = "display: none;">
                            <input type = "text" id = "report_id" value = "{{ row.id }}" readonly>
                        </td>
                        <td>
                            <input type = "text" id = "report_okpo" value = "{{ row.okpo }}" readonly>
                        </td>
                        <td>
                            <input type = "text" id = "report_organization_name" value = "{{ row.organization.full_name }}" readonly>
                        </td>
                        <td>
                            <input type = "text" id = "report_year" value = "{{ row.year }}" readonly>
                        </td>
                        <td>
                            <input type = "text" id = "report_quarter" value = "{{ row.quarter }}" readonly>
                        </td>
                        <td></td>
                    </tr>
                    <tr class="change_input_row">
                        <td colspan="10"></td>
                    </tr>
                    <tr class="versions_row" >
                        <td colspan="10" class="vers_cont">
                            <div class="text_vers">--–í–µ—Ä—Å–∏—è--</div>
                            <table class="table-versions">
                                <thead class="order-table_titels">
                                    <tr>
                                        <th style = "white-space: nowrap;">+/&times;</th>
                                        <th class="resizable" style ="white-space: nowrap; width: 100px;">–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞<div class="resizer"></div></th>
                                        <th class="resizable" style="white-space: nowrap; width: 100px;">–î–∞—Ç–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è<div class="resizer"></div></th>
                                        <th class="resizable" >–°—Ç–∞—Ç—É—Å<div class="resizer"></div></th>
                                        <th class="resizable" style="white-space: nowrap; width: 100px;">–î–∞—Ç–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏<div class="resizer"></div></th>
                                        <th class="resizable" style="white-space: nowrap; width: 200px;">–§–ò–û<div class="resizer"></div></th>
                                        <th class="resizable" style="white-space: nowrap; width: 100px;">–¢–µ–ª–µ—Ñ–æ–Ω<div class="resizer"></div></th>
                                        <th class="resizable" style="white-space: nowrap; width: 140px;">Email<div class="resizer"></div></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for rows in row.versions %}
                                    <tr class="version-row" data-id="{{ rows.id }}">
                                        <td style = "padding: 4px;">
                                            <button class="show-tickets_button">  
                                                <img src="{{ url_for('static', filename='img/Plus.svg')}}" class = "close_black" alt="">
                                                <span>–†–∞—Å–∫—Ä—ã—Ç—å</span>
                                            </button>
                                        </td>
                                        <td>
                                            <input type = "text" value = "{{ rows.begin_time}}" readonly>
                                        </td>
                                        <td>
                                            {% if rows.change_time %}
                                            <input type = "text" value = "{{ rows.change_time }}" readonly>
                                            {% else %}
                                            &nbsp;
                                            {% endif %}
                                        </td>
                                        {% if rows.status == '–ö–æ–Ω—Ç—Ä–æ–ª—å –ø—Ä–æ–π–¥–µ–Ω'%}
                                            <td style = "background: rgb(96, 255, 228);"> 
                                                <input type = "text" style = "color: black;" value = "{{ rows.status }}"  readonly>
                                            </td> 
                                        {% elif rows.status == '–°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–æ'%}
                                            <td style = "background: rgb(152, 255, 169);"> 
                                                <input type = "text" style = "color: black;" value = "{{ rows.status }}"  readonly>
                                            </td> 
                                        {% elif rows.status == '–û—Ç–ø—Ä–∞–≤–ª–µ–Ω'%}
                                            <td style = "background: rgb(96, 215, 255);"> 
                                                <input type = "text" style = "color: black;" value = "–ù–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–∏"  readonly>
                                            </td>  
                                        {% elif rows.status == '–ï—Å—Ç—å –∑–∞–º–µ—á–∞–Ω–∏—è'%}
                                            <td style = "background: rgb(255, 186, 96);"> 
                                                <input type = "text" style = "color: black;" value = "{{ rows.status }}"  readonly>
                                            </td>  
                                        {% elif rows.status == '–ì–æ—Ç–æ–≤ –∫ —É–¥–∞–ª–µ–Ω–∏—é'%}
                                            <td style = "background: rgb(255, 96, 96);"> 
                                                <input type = "text" style = "color: black;" value = "{{ rows.status }}"  readonly>
                                            </td>
                                        {% elif rows.status == '–û–¥–æ–±—Ä–µ–Ω'%}
                                            <td style = "background:  rgb(96, 255, 122);"> 
                                                <input type = "text" style = "color: black;" value = "–û–¥–æ–±—Ä–µ–Ω"  readonly>
                                            </td>
                                        {% elif rows.status == '–ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ'%}
                                            <td style = "background:  rgb(218, 218, 218); "> 
                                                <input type = "text" style = "color: black; font-weight: 600;" value = "–ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ"  readonly>
                                            </td>
                                        {% else %}
                                            <td> 
                                                <input type = "text" value = "{{ rows.status }}"  readonly>
                                            </td>  
                                        {% endif %}
                                        <td>
                                            {% if rows.sent_time %}
                                            <input type = "text" value = "{{ rows.sent_time }}" readonly>
                                            {% else %}
                                            &nbsp;
                                            {% endif %}
                                        </td>
                                        <td>
                                            <input type = "text" value = "{{ rows.fio }}" readonly>
                                        </td> 
                                        <td>
                                            <input type = "text" value = "{{ rows.telephone }}" readonly>
                                        </td> 
                                        <td>
                                            <input type = "text" value = "{{ rows.email }}" readonly>
                                        </td> 
                                    </tr>
                                    <tr class="tickets_row">
                                        <td colspan="22" class = "check_cont">
                                            <div class="text_tickets">--–ö–≤–∏—Ç–∞–Ω—Ü–∏–∏--</div>
                                            <table class="tickets_table">
                                                <thead class="order-table_titels">
                                                    <tr>
                                                        <th class="resizable" style ="white-space: nowrap; width: 100px;">–î–∞—Ç–∞ –≤—ã–¥–∞—á–∏<div class="resizer"></div></th>
                                                        <th class="resizable" style ="white-space: nowrap; width: 100px;">–£—Å–ø–µ—Ö<div class="resizer"></div></th>
                                                        <th class="resizable" style ="white-space: nowrap; width: 400px;">–û–ø–∏—Å–∞–Ω–∏–µ<div class="resizer"></div></th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    {% if rows.tickets %}
                                                    {% for ticket in rows.tickets %}
                                                        <tr class="ticket-row" data-id="{{ ticket.id }}">
                                                            <td>    
                                                                <input type="text" value="{{ ticket.begin_time }}" readonly>
                                                            </td>
                                                            <td >
                                                                <input type="checkbox" {% if ticket.luck %} checked {% endif %}  onclick="return false;">
                                                            </td>
                                                            <td>
                                                                <input type="text" value="{{ ticket.note }}" readonly>
                                                            </td>
                                                        </tr>   
                                                    {% endfor %}
                                                {% else %}
                                                    <tr class="row_with_tickets">
                                                        <td style = "height: 24px;" colspan="5">
                                                            <input type = "text"  value = "–ö–≤–∏—Ç–∞–Ω—Ü–∏–∏ –ø–æ—è–≤—è—Ç—Å—è –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ—Ç—á–µ—Ç–∞" readonly>
                                                        </td>
                                                    </tr>
                                                {% endif %}
                                                </tbody>
                                            </table>
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </td>
                    </tr>
                {% endfor %}
            {%else%}
                <tr>
                    <td></td>
                    <td></td>
                    <td style = "height: 24px;" colspan="5">
                        <input type = "text"  value = "–î–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –æ—Ç—á–µ—Ç" readonly>
                    </td>
                </tr>
            {%endif%}
            </tbody>
        </table>
    </div>
</div>

<div id="add_report_modal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3 class="change-position">–°–æ–∑–¥–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–∞</h3>
            <img src="/static/img/Close.svg" id="close_add_report_modal" class="close" alt="">
        </div>
        <div class="answer-highlight-second">
            <div class="highlight-icon">üí°</div>
            <p>–í—ã–±–µ—Ä–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π <strong>–æ—Ç—á–µ—Ç–Ω—ã–π –ø–µ—Ä–∏–æ–¥</strong>.</p>
        </div>
        <form method="POST" action="/create-new-report">
            <input type="hidden" name="modal_add_year" id="selected-year-add" value="{{previous_year}}">
            <input type="hidden" name="modal_add_quarter" id="selected-quarter-add" value="{{previous_quarter}}">

            <div class="period-selector-advanced" id="add-period-selector">
                <div class="selector-card">
                    <div class="selector-grid">
                        <div class="year-wheel">
                            <button type="button" class="year-arrow up-arrow">‚Üë</button>
                            <div class="year-display"></div>
                            <button type="button" class="year-arrow down-arrow">‚Üì</button>
                        </div>
                        
                        <div class="quarter-grid">
                            <button type="button" class="q-cell" data-q="1">
                                <span class="q-number">1 –∫–≤.</span>
                                <span class="q-months">–Ø–Ω–≤-–ú–∞—Ä</span>
                            </button>
                            <button type="button" class="q-cell" data-q="2">
                                <span class="q-number">2 –∫–≤.</span>
                                <span class="q-months">–ê–ø—Ä-–ò—é–Ω</span>
                            </button>
                            <button type="button" class="q-cell" data-q="3">
                                <span class="q-number">3 –∫–≤.</span>
                                <span class="q-months">–ò—é–ª-–°–µ–Ω</span>
                            </button>
                            <button type="button" class="q-cell" data-q="4">
                                <span class="q-number">4 –∫–≤.</span>
                                <span class="q-months">–û–∫—Ç-–î–µ–∫</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div id="selector-info-add" class="period-info"></div>
            
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
            <div class="model_but_area right">
                <button type="submit" class="blue_button">
                    <img src="/static/img/Add.svg" alt="" class="button-icon">
                    <span>–°–æ–∑–¥–∞—Ç—å –æ—Ç—á–µ—Ç</span>
                </button>
            </div>
        </form> 
    </div>
</div>

<div id="change_report_modal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3 class="change-position">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–∏–æ–¥–∞ –æ—Ç—á–µ—Ç–∞</h3>
            <img src="{{ url_for('static', filename='img/Close.svg')}}" class="close" id="close_change_report_modal" alt="">
        </div>
       
        <div class="answer-highlight-second">
            <div class="highlight-icon">üí°</div>    
            <p>–í—ã–±–µ—Ä–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π <strong>–æ—Ç—á–µ—Ç–Ω—ã–π –ø–µ—Ä–∏–æ–¥</strong>.</p>
        </div>
        <form method="POST" action="/change-period-report">
            <input type="hidden" name="modal_change_report_year" id="selected-year-change" value="">
            <input type="hidden" name="modal_change_report_quarter" id="selected-quarter-change" value="">
            <input type="hidden" name="modal_change_report_id" id="modal_change_report_id"  readonly>

            <div class="period-selector-advanced" id="change-period-selector">
                <div class="selector-card">
                    <div class="selector-grid">
                        <div class="year-wheel">
                            <button type="button" class="year-arrow up-arrow">‚Üë</button>
                            <div class="year-display"></div>
                            <button type="button" class="year-arrow down-arrow">‚Üì</button>
                        </div>
                        
                        <div class="quarter-grid">
                            <button type="button" class="q-cell" data-q="1">
                                <span class="q-number">1 –∫–≤.</span>
                                <span class="q-months">–Ø–Ω–≤-–ú–∞—Ä</span>
                            </button>
                            <button type="button" class="q-cell" data-q="2">
                                <span class="q-number">2 –∫–≤.</span>
                                <span class="q-months">–ê–ø—Ä-–ò—é–Ω</span>
                            </button>
                            <button type="button" class="q-cell" data-q="3">
                                <span class="q-number">3 –∫–≤.</span>
                                <span class="q-months">–ò—é–ª-–°–µ–Ω</span>
                            </button>
                            <button type="button" class="q-cell" data-q="4">
                                <span class="q-number">4 –∫–≤.</span>
                                <span class="q-months">–û–∫—Ç-–î–µ–∫</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div id="selector-info-change" class="period-info"></div>

            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
            <div class="model_but_area right">
                <button type="submit" class="blue_button">
                    <img src="/static/img/Edit.svg" alt="" class="button-icon">
                    <span>–ü—Ä–∏–º–µ–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</span>
                </button>
            </div>
        </form> 
    </div>
</div>

<div id="copy_report_modal" class="modal">
    <div class="modal-content">
        <div class = "modal-header">
            <h3 class = "change-position">–ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–∞</h3>
            <img src="{{ url_for('static', filename='img/Close.svg')}}" class="close" alt="">
        </div>
        <div class="answer-highlight-second" style="max-width: 550px;">
            <div class="highlight-icon">üí°</div>
            <p>
                <strong>–û–±—ã—á–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ</strong> ‚Äî —Å–æ–∑–¥–∞–µ—Ç —Ç–æ—á–Ω—É—é –∫–æ–ø–∏—é –æ—Ç—á–µ—Ç–∞ —Å–æ –≤—Å–µ–º–∏ –¥–∞–Ω–Ω—ã–º–∏.<br>
                <strong>–ù–µ–ø–æ–ª–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ</strong> ‚Äî –∫–æ–ø–∏—Ä—É–µ—Ç —Ç–æ–ª—å–∫–æ –≤–∏–¥—ã –ø—Ä–æ–¥—É–∫—Ü–∏–∏ –±–µ–∑ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.
            </p>
        </div>
        <form>
            <input type="hidden" name="modal_copy_report_year" id="selected-year-copy">
            <input type="hidden" name="modal_copy_report_quarter" id="selected-quarter-copy">
            <input type="hidden" name="modal_copy_report_id" id="modal_copy_report_id" readonly>

            <div class="period-selector-advanced" id="copy-period-selector">
                <div class="selector-card">
                    <div class="selector-grid">
                        <div class="year-wheel">
                            <button type="button" class="year-arrow up-arrow">‚Üë</button>
                            <div class="year-display"></div>
                            <button type="button" class="year-arrow down-arrow">‚Üì</button>
                        </div>
                        
                        <div class="quarter-grid">
                            <button type="button" class="q-cell" data-q="1">
                                <span class="q-number">1 –∫–≤.</span>
                                <span class="q-months">–Ø–Ω–≤-–ú–∞—Ä</span>
                            </button>
                            <button type="button" class="q-cell" data-q="2">
                                <span class="q-number">2 –∫–≤.</span>
                                <span class="q-months">–ê–ø—Ä-–ò—é–Ω</span>
                            </button>
                            <button type="button" class="q-cell" data-q="3">
                                <span class="q-number">3 –∫–≤.</span>
                                <span class="q-months">–ò—é–ª-–°–µ–Ω</span>
                            </button>
                            <button type="button" class="q-cell" data-q="4">
                                <span class="q-number">4 –∫–≤.</span>
                                <span class="q-months">–û–∫—Ç-–î–µ–∫</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div id="selector-info-copy" class="period-info"></div>

            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
            <div class = "model_but_area">
                <button type="submit" formaction="/copy-full-report" class="blue_button">
                    <img src="/static/img/Copy.svg" alt="" class="button-icon">
                    <span>–û–±—ã—á–Ω–∞—è –∫–æ–ø–∏—è</span>
                </button>

                <button type="submit" formaction="/copy-structure-report" class="blue_button_invizback">
                    <span>–ù–µ–ø–æ–ª–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ</span>
                </button>
            </div>
        </form> 
    </div>
</div>

<div id="SentModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3 class="change-position">–û—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç—á–µ—Ç–∞</h3>
            <a class="close">&times;</a>
        </div>

        <div class="answer-highlight-second" style = "max-width: 550px;">
            <div class="highlight-icon">üí°</div>
            <p>–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ <strong>—Ñ–∞–π–ª —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –≠–¶–ü</strong> –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ—Ç—á–µ—Ç–∞. –ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –≤–æ–ø—Ä–æ—Å—ã, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å <a href="/FAQ#faq11" class="instruction-link">–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–µ–π</a> –ø–æ —Ä–∞–±–æ—Ç–µ.</p>
        </div>
        <form id="sentForm" style = "text-align: center;" action="/sent-version/iddddd" method="POST" enctype="multipart/form-data">
            <div id="drop-area" class="drop-area" role="button" tabindex="0" aria-labelledby="file-upload-label">
                <p id="file-upload-label">
                    {{ _('–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Ñ–∞–π–ª —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ —Å—é–¥–∞ –∏–ª–∏') }} 
                </p> 
                <p class="file-input-label">
                    {{ _('–Ω–∞–∂–º–∏—Ç–µ –¥–ª—è –≤—ã–±–æ—Ä–∞') }} 
                </p>
                <input type="file" id="certificate_to_check" name="certificate" accept=".cer,.pem,.der" hidden 
                    aria-describedby="file-format-hint">
            </div>
            <div style = "display: flex; justify-content: center; width: 100%;">     
                <button type="submit" id = "submit_sent_button" class="blue_button report-submit"> 
                    <img src="/static/img/Send.svg" alt="" class="button-icon">
                    <span>–û—Ç–ø—Ä–∞–≤–∏—Ç—å</span>
                </button>
            </div>    
        </form>           
    </div>
</div>

<div id="contextMenu_report" class="white-panel">
    <button id = "link_change_report">
        <img src="/static/img/Edit.svg" alt="" class="button-icon-bl">
        <span>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–∏–æ–¥</span>
    </button>
    <button id = "link_coppy_report">
        <img src="/static/img/Copy.svg" alt="" class="button-icon-bl">
        <span>–ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–∞</span>
    </button>
    <form id="deleteReport" method="POST" action="/delete-report/">
        <button type="submit" id="del_reportButton">
            <img src="/static/img/Delete-black.svg" alt="" class="button-icon-bl">
            <span>–£–¥–∞–ª–∏—Ç—å</span>
        </button>
    </form>
</div>

<div id="contextMenu_version" class="white-panel">
    <button data-action="checkVersionButton">
        <img src="/static/img/Edit.svg" alt="" class="button-icon-bl">
        <span>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–¥–µ–ª—ã</span>
    </button>
    <button disabled = 'True'>
        <img src="/static/img/Delete-black.svg" alt="" class="button-icon-bl">
        <span>–£–¥–∞–ª–∏—Ç—å</span>
    </button> 
</div>

<script>

document.addEventListener('DOMContentLoaded', function () {
    const info = document.getElementById('report_automat_open');
    if (!info) {
        console.log("–≠–ª–µ–º–µ–Ω—Ç #report_automat_open –Ω–µ –Ω–∞–π–¥–µ–Ω");
        return;
    }

    const openReportId = info.dataset.openReportId;
    console.log("openReportId:", openReportId);

    if (openReportId) {
        const reportRow = document.querySelector(`.report_row[data-id="${openReportId}"]`);
        if (reportRow) {
            const versionsRow = reportRow.nextElementSibling.nextElementSibling;

            if (versionsRow && (versionsRow.style.display === 'none' || versionsRow.style.display === '')) {
                versionsRow.style.display = 'table-row';
                setTimeout(() => {
                    versionsRow.classList.add('show');
                }, 10);
            }

            const imgBlack = reportRow.querySelector('.show-versions_button .close_black');
            if (imgBlack) {
                imgBlack.classList.add('rotated');
            }
        } else {
            console.log("–ù–µ –Ω–∞–π–¥–µ–Ω–∞ —Å—Ç—Ä–æ–∫–∞ –æ—Ç—á–µ—Ç–∞");
        }
    }
});
</script>

{% endblock %}
